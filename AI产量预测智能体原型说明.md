# AI产量预测智能体原型说明

## 一、项目概述

**AI产量预测智能体**是一个基于PRD需求设计的移动端原型演示系统,通过大数据分析为用户提供作物产量与产值预估,辅助种植决策。

### 核心目标
- 提供"产量预测+产值预估"功能
- 打造AI智能体形态的交互入口
- 形成从"地块"到"收益"的闭环体验

## 二、功能架构

### 2.1 主要功能模块

#### 📊 **产量预测智能体主页**
- **智能体介绍**: AI智能预测能力展示
- **功能选择**: 两大核心场景入口
- **功能特点**: 大数据分析、气象数据、价格趋势、智能报告
- **免责声明**: 预测结果仅供参考

#### 💡 **场景一:播种前·辅助决策**

**适用场景**: 用户尚未确定具体地块或仅想了解某作物在当地的大致表现

**输入信息**:
- 作物类型(玉米/小麦/水稻/大豆/花生)
- 种植区域(省-市-县三级联动)
- 拟播种时间(月份)

**输出结果**:
- 历史产量参考区间(最低/最高/平均产量)
- 基于历史数据的分析说明
- 温馨提示(影响因素说明)

**交互流程**:
1. 选择作物类型
2. 选择种植区域(三级联动)
3. 选择播种时间
4. 点击"开始分析"
5. 显示加载动画(获取数据→分析气象→计算产量)
6. 展示分析结果
7. 可选择"重新查询"或"预估地块产值"

#### 🌾 **场景二:种植中·地块产值预估**

**适用场景**: 用户已在地块上种植,需要评估当前地块的预计产值

**前置条件**: 用户需在系统中选定一个"地块"

**地块选择**:
- 显示用户的地块列表
- 展示地块基本信息:
  - 地块名称
  - 位置(省市县)
  - 面积(亩)
  - 作物类型
  - 生长状态
  - 播种时间

**地块详情与补充**:
- **基础信息自动获取**:
  - 地块位置、面积
  - 作物类型、种植周期
  - 生长阶段、预计收获时间
  
- **可选补充信息**:
  - 语音描述: 文字输入补充细节(如"长势良好,每亩约4000株")
  - 拍照上传: 作物照片(整体/叶片/果实)

**智能报告输出**:

核心数据:
- **预计总产值**(元): 最突出显示
- **预计亩产**(斤): 单位面积产量
- **预计总产**(斤): 总产量
- **当前市价**(元/斤): 实时价格
- **亩均产值**(元): 单位面积收益

详细分析:
- **地块信息**: 名称/位置/面积/作物/生长阶段
- **气象分析**: 
  - 气温适宜度
  - 降水情况
  - 极端天气预警
- **价格趋势**:
  - 当前价格
  - 近期走势
  - 市场预期
- **管理建议**:
  - 田间管理建议
  - 防灾减灾准备
  - 病虫害防治
  - 销售时机建议

**免责声明**: 本报告基于模型估算,数据仅供参考

## 三、技术特点

### 3.1 界面设计
- **移动端优化**: 适配手机屏幕,触摸友好
- **手机壳演示**: 真实的手机外观展示
- **左侧导航**: 快速切换不同功能模块
- **风格统一**: 与现有系统保持一致的渐变紫色主题

### 3.2 交互体验
- **三级联动**: 省市县智能联动选择
- **加载动画**: 步骤化展示数据处理过程
- **实时反馈**: 表单验证和操作提示
- **平滑过渡**: 页面切换动画

### 3.3 数据展示
- **卡片式布局**: 信息层次清晰
- **可视化数据**: 数字突出,一目了然
- **颜色语义**: 不同状态用不同颜色标识
  - 绿色: 正面/良好
  - 橙色: 中性/注意
  - 红色: 警告/风险

### 3.4 模拟数据
- **作物产量数据**: 玉米/小麦/水稻/大豆/花生的历史产量区间
- **地块数据**: 两个示例地块(小麦/玉米)
- **气象数据**: 模拟气象条件分析
- **价格数据**: 模拟市场价格(小麦2.65元/斤,玉米2.30元/斤)

## 四、使用指南

### 4.1 访问入口

**方式一: 从首页进入**
1. 打开系统首页
2. 找到"产量预测智能体"卡片
3. 点击进入

**方式二: 从左侧导航进入**
1. 展开左侧导航菜单
2. 找到"AI" → "产量预测智能体"
3. 点击进入

### 4.2 播种前决策流程

```
进入智能体主页
  ↓
点击"播种前·辅助决策"
  ↓
填写信息:
- 选择作物(玉米/小麦/水稻/大豆/花生)
- 选择省份(河南/山东/河北/安徽)
- 选择城市(根据省份动态加载)
- 选择区县(根据城市动态加载)
- 选择播种月份(3/4/5/6/9/10月)
  ↓
点击"开始分析"
  ↓
等待分析(显示加载动画)
  ↓
查看结果:
- 历史产量参考区间
- 分析说明
- 温馨提示
  ↓
可选操作:
- 重新查询
- 预估地块产值
```

### 4.3 地块产值预估流程

```
进入智能体主页
  ↓
点击"种植中·地块产值预估"
  ↓
选择地块:
- 大厅水培植物-一号分区(小麦,2亩)
- 东区试验田(玉米,5亩)
  ↓
查看地块详情:
- 位置/面积/作物
- 播种时间/生长阶段/预计收获时间
  ↓
可选补充信息:
- 语音描述(文字输入)
- 拍照上传(作物照片)
  ↓
点击"开始预测产值"
  ↓
等待计算(显示加载动画)
  ↓
查看智能报告:
- 核心数据(总产值/亩产/总产/市价/亩均产值)
- 地块信息
- 气象分析
- 价格趋势
- 管理建议
- 免责声明
  ↓
可选操作:
- 返回地块列表
- 分享报告
```

## 五、页面结构

### 5.1 产量预测主页
- **头部**: 返回按钮 + 标题 + 占位
- **智能体介绍卡片**: 图标 + 标题 + 描述
- **模式选择卡片**: 两个大卡片(播种前/种植中)
- **功能特点**: 4个特点图标
- **免责声明**: 黄色提示框

### 5.2 播种前决策页
- **头部**: 返回按钮 + 标题
- **提示卡片**: 紫色渐变提示
- **表单卡片**: 5个选择框
- **操作按钮**: "开始分析"

### 5.3 播种前结果页
- **头部**: 返回按钮 + 标题
- **成功提示**: 绿色提示框
- **基本信息卡片**: 作物/区域/时间
- **产量预测卡片**: 最低/最高/平均产量
- **分析说明**: 历史数据分析
- **温馨提示**: 黄色提示框
- **操作按钮**: 重新查询 + 预估产值

### 5.4 地块选择页
- **头部**: 返回按钮 + 标题
- **提示卡片**: 紫色渐变提示
- **地块列表**: 地块卡片列表

### 5.5 地块详情页
- **头部**: 返回按钮 + 标题
- **基础信息**: 6个信息项
- **补充信息**: 
  - 语音/拍照选项卡
  - 语音输入框(可展开)
  - 照片上传区(可展开)
- **操作按钮**: "开始预测产值"

### 5.6 产值报告页
- **头部**: 返回按钮 + 标题 + 分享按钮
- **报告头**: 标题 + 生成时间
- **核心数据**: 
  - 总产值(大卡片,紫色渐变)
  - 4个小数据卡片
- **地块信息**: 详细信息列表
- **气象分析**: 3个分析项
- **价格趋势**: 3个趋势项
- **管理建议**: 建议列表
- **免责声明**: 黄色提示框
- **操作按钮**: 返回列表 + 分享报告

## 六、样式规范

### 6.1 颜色方案
- **主色调**: 紫色渐变 `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- **辅助色**:
  - 橙色渐变(播种前): `linear-gradient(135deg, #f6d365 0%, #fda085 100%)`
  - 绿色(正面): `#28a745` / `#d4edda`
  - 黄色(警告): `#ffc107` / `#fff3cd`
  - 灰色(中性): `#718096` / `#f7fafc`

### 6.2 字体规范
- **标题**: 16-20px, font-weight: 600
- **正文**: 14px
- **辅助文字**: 12-13px
- **数据**: 24-32px, font-weight: 700

### 6.3 间距规范
- **卡片外边距**: 20px
- **卡片内边距**: 20-24px
- **元素间距**: 12-16px
- **圆角**: 8-16px

### 6.4 阴影规范
- **卡片阴影**: `0 4px 12px rgba(0, 0, 0, 0.08)`
- **悬停阴影**: `0 8px 20px rgba(0, 0, 0, 0.12)`

## 七、文件清单

### 7.1 核心文件
- `index.html` - 主页面结构
- `scripts/main.js` - 主要交互逻辑(包含产量预测功能)
- `styles/main.css` - 主样式文件
- `yield-prediction-styles.css` - 产量预测专用样式

### 7.2 功能代码(在main.js中)
- `loadYieldPredictionHome()` - 加载主页
- `enterYieldMode(mode)` - 进入预测模式
- `loadBeforePlantingMode()` - 播种前模式
- `updateBeforeCities()` - 更新城市选项
- `updateBeforeCounties()` - 更新区县选项
- `submitBeforePrediction()` - 提交播种前预测
- `showBeforePredictionResult()` - 显示播种前结果
- `loadAfterPlantingMode()` - 种植中模式
- `selectField(fieldId)` - 选择地块
- `showFieldDetailForm()` - 显示地块详情
- `toggleVoiceInput()` - 切换语音输入
- `uploadFieldPhotos()` - 上传照片
- `previewFieldPhotos(event)` - 预览照片
- `submitFieldPrediction()` - 提交产值预测
- `showFieldPredictionResult()` - 显示产值报告
- `shareYieldReport()` - 分享报告
- `showYieldLoading(message)` - 显示加载动画

## 八、数据模型

### 8.1 作物产量数据
```javascript
{
    '玉米': { min: 800, max: 1100, avg: 950, unit: '斤/亩' },
    '小麦': { min: 700, max: 950, avg: 825, unit: '斤/亩' },
    '水稻': { min: 900, max: 1200, avg: 1050, unit: '斤/亩' },
    '大豆': { min: 300, max: 450, avg: 375, unit: '斤/亩' },
    '花生': { min: 500, max: 700, avg: 600, unit: '斤/亩' }
}
```

### 8.2 地块数据
```javascript
{
    'field1': {
        name: '大厅水培植物 - 一号分区',
        location: '河南省商丘市柘城县',
        area: 2,
        crop: '小麦',
        plantDate: '2025-10-15',
        growthStage: '拔节期',
        expectedHarvest: '2026-06-10'
    },
    'field2': {
        name: '东区试验田',
        location: '河南省商丘市睢县',
        area: 5,
        crop: '玉米',
        plantDate: '2025-06-01',
        growthStage: '抽穗期',
        expectedHarvest: '2025-10-15'
    }
}
```

### 8.3 地区数据
```javascript
const cities = {
    '河南省': ['郑州市', '开封市', '洛阳市', '商丘市', '周口市'],
    '山东省': ['济南市', '青岛市', '烟台市', '潍坊市', '临沂市'],
    '河北省': ['石家庄市', '唐山市', '保定市', '邯郸市', '廊坊市'],
    '安徽省': ['合肥市', '芜湖市', '蚌埠市', '阜阳市', '淮南市']
};

const counties = {
    '商丘市': ['柘城县', '睢县', '虞城县', '夏邑县', '永城市'],
    '郑州市': ['中原区', '二七区', '金水区', '惠济区', '新郑市'],
    // ... 其他城市
};
```

## 九、与PRD的对应关系

### 9.1 PRD需求映射

| PRD需求 | 实现情况 | 说明 |
|---------|---------|------|
| 播种前·辅助决策 | ✅ 已实现 | 完整的输入表单和结果展示 |
| 种植中·地块产值预估 | ✅ 已实现 | 地块选择、详情填写、智能报告 |
| 三级联动选择 | ✅ 已实现 | 省市县三级联动 |
| 语音输入补充 | ✅ 已实现 | 文字输入框模拟语音 |
| 拍照上传 | ✅ 已实现 | 图片上传和预览 |
| 产量区间展示 | ✅ 已实现 | 最低/最高/平均产量 |
| 产值计算 | ✅ 已实现 | 产量×价格=产值 |
| 气象分析 | ✅ 已实现 | 模拟气象条件评估 |
| 价格趋势 | ✅ 已实现 | 当前价格和趋势展示 |
| 智能报告 | ✅ 已实现 | 完整的报告页面 |
| 免责声明 | ✅ 已实现 | 所有结果页都有声明 |

### 9.2 PRD核心理念体现

1. **先有再优**: 使用模拟数据快速实现原型
2. **不做过重技术投入**: 纯前端实现,无后端依赖
3. **聚焦产值收益**: 突出显示"预计总产值"
4. **用户体验优先**: 流畅的交互和清晰的信息展示
5. **MVP策略**: 提供参考价值的区间预估

## 十、后续优化方向

### 10.1 功能增强
- [ ] 接入真实气象API
- [ ] 接入真实价格API
- [ ] 优化产量预测模型
- [ ] 增加历史记录功能
- [ ] 支持报告导出PDF
- [ ] 增加对比分析功能

### 10.2 数据完善
- [ ] 扩充作物种类
- [ ] 增加更多地区数据
- [ ] 收集真实历史产量数据
- [ ] 接入卫星数据(如成本合理)
- [ ] 建立专家数据库

### 10.3 交互优化
- [ ] 增加数据可视化图表
- [ ] 优化移动端手势操作
- [ ] 增加语音识别功能
- [ ] 优化照片识别(OCR/AI识别)
- [ ] 增加实时聊天辅助

### 10.4 性能优化
- [ ] 图片懒加载
- [ ] 数据缓存策略
- [ ] 离线可用(PWA)
- [ ] 加载速度优化

## 十一、测试说明

### 11.1 播种前决策测试
1. 进入"播种前·辅助决策"页面
2. 测试省市县三级联动
3. 填写完整信息并提交
4. 检查加载动画显示
5. 验证结果页数据展示
6. 测试"重新查询"和"预估产值"按钮

### 11.2 地块产值预估测试
1. 进入"种植中·地块产值预估"页面
2. 选择不同地块
3. 测试语音输入展开/收起
4. 测试照片上传功能
5. 提交并查看报告
6. 验证所有数据正确计算
7. 测试分享功能(目前显示开发中提示)

### 11.3 兼容性测试
- [ ] Chrome浏览器
- [ ] Firefox浏览器
- [ ] Safari浏览器
- [ ] Edge浏览器
- [ ] 移动端浏览器

### 11.4 响应式测试
- [ ] iPhone SE (375px)
- [ ] iPhone 12 Pro (390px)
- [ ] Pixel 5 (393px)
- [ ] iPad (768px)
- [ ] iPad Pro (1024px)

## 十二、常见问题

### Q1: 为什么打开页面样式异常?
A: 请确保 `yield-prediction-styles.css` 文件已正确引入到 `index.html` 的 `<head>` 部分。

### Q2: 选择省份后城市列表为空?
A: 请检查 `main.js` 中的 `updateBeforeCities()` 函数是否正常工作,确保省份名称与数据匹配。

### Q3: 照片上传后无法显示?
A: 这是正常现象,图片会在前端预览,不会上传到服务器(纯原型演示)。

### Q4: 分享功能无效?
A: 分享功能当前显示"开发中"提示,这是预留的功能入口。

### Q5: 如何修改模拟数据?
A: 在 `main.js` 中搜索对应的函数,修改 `yieldData`、`fieldData` 等对象的值即可。

## 十三、技术支持

如有问题或建议,请联系开发团队。

---

**文档版本**: v1.0  
**最后更新**: 2026-01-26  
**文档作者**: AI开发助手
